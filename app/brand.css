@import url('https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Cormorant+Garamond:wght@400;600;700&family=Comic+Neue:wght@700&display=swap');
/* app/brand.css */
:root{
  /* === TOKENS BASE (pueden ajustarse luego) === */
  --brand-primary: #C84A3F;
  --brand-secondary: #6B7078;
  --brand-accent: #E5C177;
  --brand-accent-cold: #84B3A6;
  --brand-ink: #0F0F0F;
  --brand-bg: #F9F9F7;

  /* === SEMÁNTICOS === */
  --background: var(--brand-bg);
  --foreground: var(--brand-ink);
  --muted: color-mix(in oklab, var(--brand-secondary) 12%, white);
  --muted-foreground: color-mix(in oklab, var(--brand-ink) 72%, var(--brand-secondary));
  --border: color-mix(in oklab, var(--foreground) 18%, transparent);
  --card: var(--background);
  --card-foreground: var(--foreground);
  --popover: var(--background);
  --popover-foreground: var(--foreground);
  --primary: var(--brand-primary);
  --primary-foreground: white;
  --secondary: var(--brand-secondary);
  --secondary-foreground: white;
  --accent: var(--brand-accent);
  --accent-foreground: #0F0F0F;
  --ring: var(--brand-primary);
  --ink: var(--brand-ink);
  /* Surfaces neutrales de fallback para HOME */
  --surface: var(--card, var(--background));
  --surface-alt: color-mix(in oklab, var(--surface) 92%, black);
  --surface-foreground: var(--foreground);

  /* Hero gradient tokens (light) */
  --hero-accent: var(--accent);
  --hero-primary: var(--primary);

  /* === PALETAS POR LÁMINA (PDF, orden 1→4 de arriba hacia abajo) === */
  /* LÁMINA 1 */
  --lam1-primary: #d9d5c9;
  --lam1-accent: #656c71; /* (antes #65c71 corregido) */
  --lam1-bg: #c05145;
  --lam1-fg: #e6c794;
  --lam1-muted: #80a9a6;
  --lam1-muted-fg: #80a9a6;

  /* LÁMINA 2 */
  --lam2-primary: #d9d5c9;
  --lam2-accent: #2563EB;
  --lam2-bg: #c05145;
  --lam2-fg: var(--brand-ink);
  --lam2-muted: #cacd27;
  --lam2-muted-fg: var(--brand-secondary);

  /* LÁMINA 3 */
  --lam3-primary: #d9d5c9;
  --lam3-accent: #1e2c36;
  --lam3-bg: #c24f39;
  --lam3-fg: #3c352f;
  --lam3-muted: #ebd9b8;
  --lam3-muted-fg: #ebd9b8;

  /* LÁMINA 4 (TODO: confirmar del PDF si difiere de 3) */
  --lam4-primary: var(--lam3-primary);
  --lam4-accent: var(--lam3-accent);
  --lam4-bg: var(--lam3-bg);
  --lam4-fg: var(--lam3-fg);
  --lam4-muted: var(--lam3-muted);
  --lam4-muted-fg: var(--lam3-muted-fg);

  /* Tipos (se sobreescriben al cargar fuentes) */
  --font-display: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";
  --font-sans: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";
  --font-heading: var(--font-sans);
  --font-body: var(--font-sans);
}

@media (prefers-color-scheme: dark){
  :root{
    --brand-bg:#0F0F10;
    --brand-ink:#ECECEC;

    --background: var(--brand-bg);
    --foreground: var(--brand-ink);
    --ink: var(--brand-ink);
    --muted: color-mix(in oklab, var(--brand-secondary) 20%, black);
    --muted-foreground: color-mix(in oklab, var(--brand-ink) 60%, #B8B8B8);
    --border: color-mix(in oklab, var(--foreground) 28%, transparent);
    --card: var(--background);
    --card-foreground: var(--foreground);
    --popover: var(--background);
    --popover-foreground: var(--foreground);
    --primary-foreground: #111315;
    --secondary-foreground: #111315;
    --accent-foreground: #111315;
    --ring: color-mix(in oklab, var(--brand-primary) 70%, white);
    /* Surfaces neutrales de fallback para HOME (dark) */
    --surface: var(--card);
    --surface-alt: color-mix(in oklab, var(--surface) 92%, white);
    --surface-foreground: var(--foreground);

    /* Hero gradient tokens (dark) */
    --hero-accent: color-mix(in oklab, var(--accent) 60%, black);
    --hero-primary: color-mix(in oklab, var(--primary) 60%, black);
  }
}

/* ========= THEME HOOKS POR SECCIÓN (valores del cliente) ========= */
/* Home - neutral (define surface/border for better separation in light & dark) */
.theme-home{
  /* In light: surface slightly darker than background for subtle card plane */
  --surface: color-mix(in oklab, var(--background) 90%, black);
  --surface-alt: color-mix(in oklab, var(--surface) 88%, black);
  --surface-foreground: var(--foreground);
  /* Lift border a bit for AA on light */
  --border: color-mix(in oklab, var(--foreground) 22%, transparent);

  /* controls - light */
  --btn-bg:      color-mix(in oklab, var(--surface) 96%, white);
  --btn-fg:      var(--surface-foreground);
  --btn-border:  color-mix(in oklab, var(--foreground) 18%, transparent);
  --btn-shadow:        0 1px 0 rgba(255,255,255,0.28) inset, 0 1px 1px rgba(0,0,0,0.06), 0 2px 6px rgba(0,0,0,0.10);
  --btn-shadow-hover:  0 1px 0 rgba(255,255,255,0.36) inset, 0 2px 8px rgba(0,0,0,0.12);
  --btn-shadow-active: 0 0   0 rgba(255,255,255,0.00) inset, 0 1px 2px rgba(0,0,0,0.12) inset;

  --chip-bg:     color-mix(in oklab, var(--surface) 94%, white);
  --chip-fg:     color-mix(in oklab, var(--surface-foreground) 90%, black);
  --chip-border: color-mix(in oklab, var(--foreground) 16%, transparent);
}
@media (prefers-color-scheme: dark){
  .theme-home{
    /* In dark: surface slightly lighter than background to avoid merging */
    --surface:       color-mix(in oklab, var(--background) 85%, white);
    --surface-alt:   color-mix(in oklab, var(--surface) 88%, white);
    /* Make border visible on dark */
    --border:        rgba(255,255,255,0.16);
    --surface-foreground: var(--foreground);

    /* controls - dark */
    --btn-bg:      #ffffff;
    --btn-fg:      #111315;
    --btn-border:  rgba(255,255,255,0.20);
    --btn-shadow:        0 1px 0 rgba(255,255,255,0.10) inset, 0 1px 1px rgba(0,0,0,0.50), 0 2px 6px rgba(0,0,0,0.60);
    --btn-shadow-hover:  0 1px 0 rgba(255,255,255,0.18) inset, 0 2px 8px rgba(0,0,0,0.60);
    --btn-shadow-link:   0 0 0 rgba(0,0,0,0.0);

    --chip-bg:     color-mix(in oklab, var(--surface) 88%, white);
    --chip-fg:     color-mix(in oklab, var(--surface-foreground) 100%, white);
    --chip-border: rgba(255,255,255,0.20);
  }
}
/* Nota: corregimos dos typos para que sean HEX válidos:
   #65c71  → #065c71
   #3f6fla → #3f6f1a
*/

.theme-kisolab{
  --primary: var(--lam1-primary);
  --accent: var(--lam1-accent);
  --background: var(--lam1-bg);
  --foreground: var(--lam1-fg);
  --muted: var(--lam1-muted);
  --muted-foreground: var(--lam1-muted-fg);
  /* fuentes por tema */
  --font-heading: var(--font-libre), "Libre Baskerville","Baskerville","Big Caslon","Palatino Linotype","Palatino","Times New Roman",serif;
  --font-body: var(--font-sans);
}

.theme-focus-penalty{
  --primary: var(--lam2-primary);
  --accent: var(--lam2-accent);
  --background: var(--lam2-bg);
  --foreground: var(--lam2-fg);
  --muted: var(--lam2-muted);
  --muted-foreground: var(--lam2-muted-fg);
  --primary-contrast: #ffffff;
  --surface: color-mix(in oklab, var(--primary) 94%, var(--background));
  --surface-foreground: #1f1f1f; /* tinta oscura para texto sobre surface crema */
  /* fuentes por tema */
  --font-heading: var(--font-comic), "Comic Neue","Comic Sans MS","Aetherius","Arial Rounded MT Bold", ui-sans-serif, system-ui, sans-serif;
  --font-body: var(--font-sans);
}

.theme-mundo-kiso{
  --primary: var(--lam3-primary);
  --accent: var(--lam3-accent);
  --background: var(--lam3-bg);
  --foreground: var(--lam3-fg);
  --muted: var(--lam3-muted);
  --muted-foreground: var(--lam3-muted-fg);
  /* fuentes por tema */
  --font-heading: var(--font-libre), "Libre Baskerville","Baskerville","Big Caslon","Shree 714","Georgia","Times New Roman",serif;
  --font-body: var(--font-sans);

  /* superficies para cards (light) */
  --surface: #e9dfd2;         /* crema cálido sobre terracota */
  --surface-alt: #e2d6c6;     /* variante secundaria */
  --surface-foreground: #1f1f1f; /* tinta para texto en surface */
  --border: rgba(0,0,0,0.16);  /* borde más visible en crema */
}

.theme-orbe-sagrado{
  --primary: var(--lam1-primary);
  --accent: var(--lam1-accent);
  --background: var(--lam1-bg);
  --foreground: var(--lam1-fg);
  --muted: var(--lam1-muted);
  --muted-foreground: var(--lam1-muted-fg);
  /* fuentes por tema */
  --font-heading: var(--font-libre), "Libre Baskerville","Baskerville","Big Caslon","Shree 714","Georgia","Times New Roman",serif;
  --font-body: var(--font-sans);
}

.theme-20-semillas{
  /* lámina #2 */
  --primary: var(--lam2-primary);
  --accent: var(--lam2-accent);
  --background: var(--lam2-bg);
  --foreground: var(--lam2-fg);
  --muted: var(--lam2-muted);
  --muted-foreground: var(--lam2-muted-fg);
  --font-heading: "Baskerville","Big Caslon","Shree 714","Georgia","Times New Roman",serif;
  --font-body: var(--font-sans);
}

/* Utilidad: aplica el tema al contenedor */
.theme{
  background: var(--background);
  color: var(--foreground);
  /* Typography tokens */
  --h1-size: clamp(2rem, 3.2vw + 1rem, 3.75rem);
  --h1-leading: 1.1;
  --h1-track: -0.02em;

  --h2-size: clamp(1.375rem, 1.6vw + 1rem, 2rem);
  --h2-leading: 1.2;
  --h2-track: -0.01em;

  --lead-size: 1.125rem;
  --lead-leading: 1.6;
}

/* Typography utilities */
.ty-h1{font-size:var(--h1-size);line-height:var(--h1-leading);letter-spacing:var(--h1-track);font-weight:800;color:var(--ink);font-family:var(--font-heading)}
.ty-h2{font-size:var(--h2-size);line-height:var(--h2-leading);letter-spacing:var(--h2-track);font-weight:700;color:var(--ink);font-family:var(--font-heading)}
.ty-lead{font-size:var(--lead-size);line-height:var(--lead-leading);opacity:.9;color:var(--ink);font-family:var(--font-body)}


/* Focus Penalty - variantes explícitas por modo */
.theme-focus-penalty.light {
  --bg: #ffffff;
  --surface: #faf7f2;
  --surface-alt: #f2efe8;
  --border: rgba(0,0,0,0.08);
  --fg: #1b1b1b;
  --fg-muted: #6a6f6a;
  --fg-strong: #0b0b0b;
  --primary: #10B981;
  --primary-weak: color-mix(in oklab, var(--primary) 16%, transparent);
  --primary-contrast: #ffffff;
  --ring: var(--primary);
  --accent: var(--primary);
  --shadow-md: 0 1px 2px rgba(0,0,0,.06), 0 8px 24px rgba(0,0,0,.06);
  --shadow-lg: 0 12px 32px rgba(0,0,0,.12);
}

.theme-focus-penalty.dark {
  --bg: #201a19;
  --surface: #1a1a1a;
  --surface-alt: #242424;
  --border: rgba(255,255,255,0.08);
  --fg: #e9e9e9;
  --fg-muted: #b0b0b0;
  --fg-strong: #ffffff;
  --primary: #10B981;
  --primary-weak: color-mix(in oklab, var(--primary) 16%, transparent);
  --primary-contrast: #ffffff;
  --ring: var(--primary);
  --accent: var(--primary);
  --shadow-md: 0 1px 0 rgba(255,255,255,.04), 0 8px 18px rgba(0,0,0,.28);
  --shadow-lg: 0 12px 26px rgba(0,0,0,.38);
}

@media (prefers-color-scheme: dark) {
  .theme-focus-penalty:not(.light):not(.dark) {
    --bg: #0b0b0b;
    --surface: #1a1a1a;
    --surface-alt: #242424;
    --border: rgba(255,255,255,0.08);
    --fg: #e9e9e9;
    --fg-muted: #b0b0b0;
    --fg-strong: #ffffff;
  }
}

@media (prefers-color-scheme: dark) {
  .theme-mundo-kiso:not(.light):not(.dark) {
    /* superficies para cards (dark) */
    --surface: #0f1011;             /* base de tarjetas */
    --surface-alt: #151719;         /* contenedor interno */
    --surface-foreground: rgba(255,255,255,.92); /* tinta sobre surface */
    --foreground: rgba(255,255,255,.92);         /* texto general */
    --ink: var(--foreground); /* headings usan el mismo tono que el texto en dark */
    --border: rgba(255,255,255,0.14);            /* contornos más visibles */
  }
}

/* === Dark mode overrides for manual toggle (html.dark) === */
:root.dark{
  --background: #0b0c0f;
  --foreground: #e8e8ea;
  --ink: #e8e8ea;
}
.dark .theme-mundo-kiso{
  --surface: #1a1b1e;
  --surface-alt: #24262b;
  --border: rgba(255,255,255,0.14);
  --foreground: #e8e8ea;
  --surface-foreground: #e8e8ea;
  --ink: #e8e8ea;
}

/* =============================
   Animations - append-only
   Ubicación: al final de app/brand.css
   Notas: no tocar tokens ni temas. Solo utilidades.
============================= */

/* Keyframes base */
@keyframes kiso-fade-in{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:none}}
@keyframes kiso-float-slow{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
@keyframes kiso-marquee-x{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
@keyframes kiso-shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
@keyframes kiso-ring{0%{box-shadow:0 0 0 0 color-mix(in oklab,var(--ring) 40%,transparent)}80%{box-shadow:0 0 0 10px color-mix(in oklab,var(--ring) 0%,transparent)}100%{box-shadow:0 0 0 0 color-mix(in oklab,var(--ring) 0%,transparent)}}

/* Utilidades de animación */
.anim-fade-in{animation:kiso-fade-in .6s ease-out both}
.anim-float-slow{animation:kiso-float-slow 6s ease-in-out infinite}
.anim-marquee{animation:kiso-marquee-x 30s linear infinite;will-change:transform}
.anim-shimmer{background:linear-gradient(90deg,transparent,color-mix(in oklab,var(--foreground) 6%,transparent),transparent);background-size:200% 100%;animation:kiso-shimmer 2s linear infinite}
.anim-ring{animation:kiso-ring 1.6s ease-out infinite}

/* Respeto a reduced motion */
@media (prefers-reduced-motion: reduce){
  .anim-fade-in,.anim-float-slow,.anim-marquee,.anim-shimmer,.anim-ring{animation:none!important}
}

/* === Gallery bullets active state (CSS-only, con :target en el carrusel) === */
#carousel-galeria:not(:has(:target)) .gal-dots [data-bullet="g1"] { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g1:target)  .gal-dots [data-bullet="g1"]  { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g2:target)  .gal-dots [data-bullet="g2"]  { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g3:target)  .gal-dots [data-bullet="g3"]  { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g4:target)  .gal-dots [data-bullet="g4"]  { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g5:target)  .gal-dots [data-bullet="g5"]  { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g6:target)  .gal-dots [data-bullet="g6"]  { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g7:target)  .gal-dots [data-bullet="g7"]  { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g8:target)  .gal-dots [data-bullet="g8"]  { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g9:target)  .gal-dots [data-bullet="g9"]  { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g10:target) .gal-dots [data-bullet="g10"] { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g11:target) .gal-dots [data-bullet="g11"] { background-color: rgba(255,255,255,0.9); }
#carousel-galeria:has(#g12:target) .gal-dots [data-bullet="g12"] { background-color: rgba(255,255,255,0.9); }